@page "/"
@page "/games"
@using TheCodeKitchen.Application.Contracts.Response.Game

<PageTitle>Games</PageTitle>

<MudText Typo="Typo.h3" Class="mb-3">Games</MudText>

<MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@CreateGame" Class="mb-3">
    <MudIcon Icon="@Icons.Material.Filled.Add"/> Create Game
</MudButton>

@if (!string.IsNullOrWhiteSpace(ErrorMessage))
{
    <MudAlert Severity="Severity.Error">@ErrorMessage</MudAlert>
}
else
{
    <MudTable Items="@GetGameResponses"
              Hover="true"
              Breakpoint="Breakpoint.Sm"
              Loading="@(GetGameResponses == null)"
              LoadingProgressColor="Color.Primary"
              OnRowClick="@((TableRowClickEventArgs<GetGameResponse> e) => NavigateToGame(e.Item!.Id, e.Item.Started != null))">
        <NoRecordsContent>
            No games found.
        </NoRecordsContent>
        <HeaderContent>
            <MudTh>Name</MudTh>
            <MudTh>Started</MudTh>
            <MudTh>Paused</MudTh>
            <MudTh>Speed modifier</MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd DataLabel="Name">@context.Name</MudTd>
            <MudTd DataLabel="Started">@context.Started</MudTd>
            <MudTd DataLabel="Paused">@context.Paused</MudTd>
            <MudTd DataLabel="Speed modifier">@context.SpeedModifier</MudTd>
        </RowTemplate>
    </MudTable>
}
